define(function(require,exports,module){var $=require("plugin/jquery");$.fn.selectMatch=function(t){var h="select",d="selected",f="disabled",u="active",p="reverse",v=$.extend({},{prefix:"ui-",trigger:["change"]},t||{}),g=v.prefix+h,m=v.prefix.replace(/[a-z]/gi,"");return $(this).each(function(t,i){var l=$(this).hide().data(h);l||(l=$("<div></div>").on("click","a",function(){if($(i).prop(f))return!1;if(l.toggleClass(u),l.hasClass(u)){var t=l.find("ul"),e=t.offset().top+t.outerHeight()>Math.max($(document.body).height(),$(window).height());l[e?"addClass":"removeClass"](p);var a=l.data("scrollTop"),s=t.find("."+d);a&&a[1]==s.attr("data-index")&&a[2]==s.text()&&(t.scrollTop(a[0]),l.removeData("scrollTop"))}else l.removeClass(p)}).on("click","li",function(t,a){var e=$(this).attr("data-index"),s=$(this).parent().scrollTop();l.removeClass(u),l.data("scrollTop",[s,e,$(this).text()]),$(i).find("option").eq(e).get(0)[d]=!0,$(i).selectMatch(v),$.each(v.trigger,function(t,e){$(i).trigger(e,[a])})}),$(this).data(h,l),$(this).after(l),$(document).mouseup(function(t){var e=t.target;e&&l.hasClass(u)&&l.get(0)!==e&&0==l.get(0).contains(e)&&l.removeClass(u).removeClass(p)}));var e,a,s,n=(e=$(this),a=0,s="",e.find("option").each(function(t){var e=[g+m+"datalist"+m+"li",this.className];this[d]&&(a=t,e.push(d)),this[f]&&e.push(f),s=s+'<li class="'+e.join(" ")+'" data-index='+t+">"+this.innerHTML+"</li>"}),{index:a,html:s}),r=$(this).find("option").eq(n.index);l.attr("class",i.className+" "+g);var o='<a href="javascript:" class="'+g+m+'button"><span class="'+g+m+'text">'+r.html()+'</span><i class="'+g+m+'icon"></i></a>',c='<ul class="'+g+m+'datalist">'+n.html+"</ul>";l.html(o+c)})},module.exports={init:function(t,e){(t=t||$("select.form-select")).selectMatch(e)}}});