define(function(require,exports,module){!function($){"use strict";$.extend($.fn.Table.defaults,{treeShowField:null,idField:"id",parentIdField:"pid",onGetNodes:function(i,e){var n=this,o=[];return $.each(e,function(e,t){i[n.options.idField]===t[n.options.parentIdField]&&o.push(t)}),o},onCheckRoot:function(e,t){return!e[this.options.parentIdField]}});var e=$.fn.Table.Constructor,d=e.prototype.initRow,t=e.prototype.initHeader;e.prototype.initHeader=function(){var i=this;t.apply(i,Array.prototype.slice.apply(arguments));var n=i.options.treeShowField;n&&$.each(this.header.fields,function(e,t){if(n===t)return i.treeEnable=!0,!1})};var s=function(e,t,i,n){var o=this,r=o.options.onGetNodes.apply(o,[e,i]);e._nodes=r,n.append(d.apply(o,[e,t,i,n]));for(var p=r.length-1,l=0;l<=p;l++){var a=r[l];a._level=e._level+1,a._parent=e,l===p&&(a._last=1),o.options.rowStyle=function(e,t){return{classes:"treegrid-"+(e[o.options.idField]?e[o.options.idField]:0)+" treegrid-parent-"+(e[o.options.parentIdField]?e[o.options.parentIdField]:0)}},s.apply(o,[a,$.inArray(a,i),i,n])}};e.prototype.initRow=function(e,t,i,n){var o=this;return o.treeEnable?!!o.options.onCheckRoot.apply(o,[e,i])&&(e._level===undefined&&(e._level=0),o.options.rowStyle=function(e,t){return{classes:"treegrid-"+(e[o.options.idField]?e[o.options.idField]:0)}},s.apply(o,[e,t,i,n]),!0):d.apply(o,Array.prototype.slice.apply(arguments))}}(require("jquery"))});